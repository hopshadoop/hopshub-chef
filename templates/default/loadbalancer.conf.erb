<VirtualHost *:1080>

  ServerAdmin webmaster@localhost
  DocumentRoot /var/www/html
  
  ErrorLog <%= @load_balancer_log_dir %>/error.log
  CustomLog <%= @load_balancer_log_dir %>/access.log combined
  
  <Proxy balancer://payara>
      <% @glassfish_nodes.each do |ipaddress| %>
        BalancerMember <%= "https://#{ipaddress}:#{node['hopsworks']['internal']['port']}" %>
      <% end %>
  </Proxy>

  ProxyPass         /  balancer://payara/
  ProxyPassReverse  /  balancer://payara/
</VirtualHost>