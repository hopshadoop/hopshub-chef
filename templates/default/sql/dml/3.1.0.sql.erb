REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('pki_ca_configuration', '<%= @pki_ca_configuration %>');

DELETE FROM `hopsworks`.`variables` WHERE `id`='dela_cluster_ip';
DELETE FROM `hopsworks`.`variables` WHERE `id`='dela_client_type';
DELETE FROM `hopsworks`.`variables` WHERE `id`='dela_version';
DELETE FROM `hopsworks`.`variables` WHERE `id`='dela_cluster_http_port';
DELETE FROM `hopsworks`.`variables` WHERE `id`='dela_hopsworks_public_port';
DELETE FROM `hopsworks`.`variables` WHERE `id`='hops_site_host';
DELETE FROM `hopsworks`.`variables` WHERE `id`='hopssite_heartbeat_interval';
DELETE FROM `hopsworks`.`variables` WHERE `id`='hops_site_endpoint';

REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("enable_data_science_profile", "<%= node['hopsworks']['enable_data_science_profile'] %>", 1);

REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("enable_jupyter_python_kernel_non_kubernetes", "<%= node['hopsworks']['enable_jupyter_python_kernel_non_kubernetes'] %>", 1);

REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("enable_snowflake_storage_connectors", "<%= node['hopsworks']['enable_snowflake_storage_connectors'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("enable_redshift_storage_connectors", "<%= node['hopsworks']['enable_redshift_storage_connectors'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("enable_adls_storage_connectors", "<%= node['hopsworks']['enable_adls_storage_connectors'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("enable_kafka_storage_connectors", "<%= node['hopsworks']['enable_kafka_storage_connectors'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("enable_gcs_storage_connectors", "<%= node['hopsworks']['enable_gcs_storage_connectors'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("enable_bigquery_storage_connectors", "<%= node['hopsworks']['enable_bigquery_storage_connectors'] %>", 1);

REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES('enable_read_only_git_repositories', '<%= node['hopsworks']['enable_read_only_git_repositories'] %>', 1);


INSERT INTO `hopsworks`.`users`
(`username`, `password`, `email`, `fname`, `lname`, `activated`, `title`, `false_login`, `isonline`, `secret`, `validation_key`, `mode`, `password_changed`, `notes`, `status`, `max_num_projects`, `two_factor`, `tours_state` , `salt`) VALUES
('flyingduck', '<%= @flyingduck_password %>', '<%= node['flyingduck']['hopsworks']['email'] %>', 'Flyingduck', 'Server', '2021-03-16 16:17:00', 'Mr', -1, 0, 'V3WBPS4G2WMQ53VA', NULL, 0, '2021-03-16 16:17:00', NULL, 2, 30, 0, 3, '<%= @flyingduck_salt %>')
ON DUPLICATE KEY UPDATE `username`="flyingduck";

INSERT IGNORE INTO `hopsworks`.`user_group` (`uid`, `gid`) SELECT `uid`, 1007 FROM `hopsworks`.`users` WHERE `username`='flyingduck';
